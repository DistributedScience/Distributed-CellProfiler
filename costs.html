
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>What does Distributed-CellProfiler cost? &#8212; DCP Documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="distributedscience.github.io/costs.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Step 0: Prep" href="step_0_prep.html" />
    <link rel="prev" title="What happens in AWS when I run Distributed-CellProfiler?" href="overview_2.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">DCP Documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="overview.html">
                    What is Distributed-CellProfiler?
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  FAQ
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="overview_2.html">
   What happens in AWS when I run Distributed-CellProfiler?
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   What does Distributed-CellProfiler cost?
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Running DCP
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="step_0_prep.html">
   Step 0: Prep
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="step_1_configuration.html">
   Step 1: Configuration
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="config_examples.html">
     config.py configuration examples
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="SQS_QUEUE_information.html">
     SQS QUEUE Information
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="step_2_submit_jobs.html">
   Step 2: Submit Jobs
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="passing_files_to_DCP.html">
     Passing Files to DCP
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="step_3_start_cluster.html">
   Step 3: Start Cluster
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="step_4_monitor.html">
   Step 4: Monitor
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Technical Guides
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="dashboard.html">
   AWS Cloudwatch Dashboard
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="advanced_configuration.html">
   Advanced Configuration of DCP
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="AWS_hygiene_scripts.html">
   AWS Hygiene Scripts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="troubleshooting_runs.html">
   Troubleshooting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="versions.html">
   Versions
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/distributed-science/distributed-cellprofiler"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/distributed-science/distributed-cellprofiler/issues/new?title=Issue%20on%20page%20%2Fcosts.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/distributed-science/distributed-cellprofiler/edit/main/DCP-documentation/costs.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/costs.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>What does Distributed-CellProfiler cost?</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="what-does-distributed-cellprofiler-cost">
<h1>What does Distributed-CellProfiler cost?<a class="headerlink" href="#what-does-distributed-cellprofiler-cost" title="Permalink to this headline">#</a></h1>
<p>Distributed-CellProfiler is run by a series of three commands, only one of which incurs costs at typical scale of usage:</p>
<p><a class="reference internal" href="step_1_configuration.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">setup</span></code></span></a> creates a queue in SQS and a cluster, service, and task definition in ECS.
ECS is entirely free.
SQS queues are free to create and use up to 1 million requests/month.</p>
<p><a class="reference internal" href="step_2_submit_jobs.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">submitJobs</span></code></span></a> places messages in the SQS queue which is free (under 1 million requests/month).</p>
<p><a class="reference internal" href="step_3_start_cluster.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">startCluster</span></code></span></a> is the only command that incurs costs with initiation of your spot fleet request, creating machine alarms, and optionally creating a run dashboard.</p>
<p>The spot fleet is the major cost of running Distributed-CellProfiler, exact pricing of which depends on the number of machines, type of machines, and duration of use.
Your bid is configured in the <a class="reference internal" href="step_1_configuration.html"><span class="doc std std-doc">config file</span></a>.</p>
<p>Spot fleet costs can be minimized/stopped in multiple ways:</p>
<ol class="simple">
<li><p>We encourage the use of <a class="reference internal" href="step_4_monitor.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">monitor</span></code></span></a> during your job to help minimize the spot fleet cost as it automatically scales down your spot fleet request as your job queue empties and cancels your spot fleet request when you have no more jobs in the queue.
Note that you can also perform a more aggressive downscaling of your fleet by monitor by engaging Cheapest mode (see <a class="reference internal" href="step_4_monitor.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">more</span> <span class="pre">information</span> <span class="pre">here</span></code></span></a>).</p></li>
<li><p>If your job is finished, you can still initiate <a class="reference internal" href="step_4_monitor.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">monitor</span></code></span></a> to perform the same cleanup (without the automatic scaling).</p></li>
<li><p>If you want to abort and clean up a run, you can purge your SQS queue in the <a class="reference external" href="https://console.aws.amazon.com/sqs/">AWS SQS console</a> (by selecting your queue and pressing Actions =&gt; Purge) and then initiate <a class="reference internal" href="step_4_monitor.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">monitor</span></code></span></a> to perform the same cleanup.</p></li>
<li><p>You can stop the spot fleet request directly in the <a class="reference external" href="https://console.aws.amazon.com/ec2/">AWS EC2 console</a> by going to Instances =&gt; Spot Requests, selecting your spot request, and pressing Actions =&gt; Cancel Spot Request.</p></li>
</ol>
<p>After the spot fleet has started, a Cloudwatch instance alarm is automatically placed on each instance in the fleet.
Cloudwatch instance alarms <a class="reference external" href="https://aws.amazon.com/cloudwatch/pricing/">are currently $0.10/alarm/month</a>.
Cloudwatch instance alarm costs can be minimized/stopped in multiple ways:</p>
<ol class="simple">
<li><p>If you run monitor during your job, it will automatically delete Cloudwatch alarms for any instance that is no longer in use once an hour while running and at the end of a run.</p></li>
<li><p>If your job is finished, you can still initiate <a class="reference internal" href="step_4_monitor.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">monitor</span></code></span></a> to delete Cloudwatch alarms for any instance that is no longer in use.</p></li>
<li><p>In <a class="reference external" href="https://console.aws.amazon.com/cloudwatch/">AWS Cloudwatch console</a> you can select unused alarms by going to Alarms =&gt; All alarms. Change Any State to Insufficient Data, select all alarms, and then Actions =&gt; Delete.</p></li>
<li><p>We provide a <span class="xref myst">hygiene script</span> that will clean up old alarms for you.</p></li>
</ol>
<p>Cloudwatch Dashboards <a class="reference external" href="https://aws.amazon.com/cloudwatch/pricing/">are currently free</a> for 3 Dashboards with up to 50 metrics per month and are $3 per dashboard per month after that.
Cloudwatch Dashboard costs can be minimized/prevented in multiple ways:</p>
<ol class="simple">
<li><p>You can choose not to have Distributed-CellProfiler create a Dashboard by setting <code class="docutils literal notranslate"><span class="pre">CREATE_DASHBOARD</span> <span class="pre">=</span> <span class="pre">'False'</span></code> in your <a class="reference internal" href="step_1_configuration.html"><span class="doc std std-doc">config file</span></a>.</p></li>
<li><p>We encourage the use of <a class="reference internal" href="step_4_monitor.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">monitor</span></code></span></a> during your job as if you have set <code class="docutils literal notranslate"><span class="pre">CLEAN_DASHBOARD</span> <span class="pre">=</span> <span class="pre">'True'</span></code> in your <a class="reference internal" href="step_1_configuration.html"><span class="doc std std-doc">config file</span></a> it will automatically delete your Dashboard when your job is done.</p></li>
<li><p>If your job is finished, you can still initiate <a class="reference internal" href="step_4_monitor.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">monitor</span></code></span></a> to perform the same cleanup (without the automatic scaling).</p></li>
<li><p>You can manually delete Dashboards in the <span class="xref myst">Cloudwatch Console</span> by going to Dashboards, selecting your Dashboard, and selecting Delete.</p></li>
</ol>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="overview_2.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">What happens in AWS when I run Distributed-CellProfiler?</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="step_0_prep.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Step 0: Prep</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Broad Institute<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>