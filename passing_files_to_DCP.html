

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Passing Files to DCP &#8212; DCP Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'passing_files_to_DCP';</script>
    <link rel="canonical" href="distributedscience.github.io/passing_files_to_DCP.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Step 3: Start Cluster" href="step_3_start_cluster.html" />
    <link rel="prev" title="Step 2: Submit Jobs" href="step_2_submit_jobs.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="overview.html">
  
  
  
  
  
  
    <p class="title logo__title">DCP Documentation</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="overview.html">
                    What is Distributed-CellProfiler?
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="overview_2.html">What happens in AWS when I run Distributed-CellProfiler?</a></li>
<li class="toctree-l1"><a class="reference internal" href="costs.html">What does Distributed-CellProfiler cost?</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Running DCP</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="step_0_prep.html">Step 0: Prep</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="step_1_configuration.html">Step 1: Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="config_examples.html">config.py configuration examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="SQS_QUEUE_information.html">SQS QUEUE Information</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="step_2_submit_jobs.html">Step 2: Submit Jobs</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Passing Files to DCP</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="step_3_start_cluster.html">Step 3: Start Cluster</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting_start_cluster.html">Troubleshooting startCluster</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="step_4_monitor.html">Step 4: Monitor</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Technical Guides</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">AWS Cloudwatch Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="external_buckets.html">Using External Buckets</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_configuration.html">Advanced Configuration of DCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="AWS_hygiene_scripts.html">AWS Hygiene Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting_runs.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="versions.html">Versions</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/distributedscience/distributed-cellprofiler" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/distributedscience/distributed-cellprofiler/edit/main/DCP-documentation/passing_files_to_DCP.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/distributedscience/distributed-cellprofiler/issues/new?title=Issue%20on%20page%20%2Fpassing_files_to_DCP.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/passing_files_to_DCP.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Passing Files to DCP</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metadata-use-in-dcp">Metadata use in DCP</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-data">Load Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-loaddata-csv">Creating LoadData.csv</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-loaddata-csv">Using LoadData.csv</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#batch-files">Batch Files</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-batch-files">Creating batch files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-batch-files">Using batch files</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-lists">File lists</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-file-lists">Creating File Lists</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-file-lists">Using File Lists</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="passing-files-to-dcp">
<h1>Passing Files to DCP<a class="headerlink" href="#passing-files-to-dcp" title="Permalink to this heading">#</a></h1>
<p>Distributed-CellProfiler can be told what files to use through LoadData.csv, Batch Files, or file lists.</p>
<section id="metadata-use-in-dcp">
<h2>Metadata use in DCP<a class="headerlink" href="#metadata-use-in-dcp" title="Permalink to this heading">#</a></h2>
<p>Distributed-CellProfiler requires metadata and grouping in order to split jobs.
This means that, unlikely a generic CellProfiler workflow, the inclusion of metadata and grouping are NOT optional for pipelines you wish to use in Distributed-CellProfiler.</p>
<ul class="simple">
<li><p>If using LoadData, this means ensuring that your input CSV has some metadata to use for grouping and “Group images by metdata?” is set to “Yes”.</p></li>
<li><p>If using batch files or file lists, this means ensuring that the Metadata and Groups modules are enabled, and that you are extracting metadata from file and folder names <em>that will also be present in your remote system</em> in the Metadata module in your CellProfiler pipeline.
You can pass additional metadata to CellProfiler by <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">another</span> <span class="pre">extraction</span> <span class="pre">method</span></code>, setting the method to <code class="docutils literal notranslate"><span class="pre">Import</span> <span class="pre">from</span> <span class="pre">file</span></code> and setting Metadata file location to <code class="docutils literal notranslate"><span class="pre">Default</span> <span class="pre">Input</span> <span class="pre">Folder</span></code>.
Metadata of either type can be used for grouping.</p></li>
</ul>
</section>
<section id="load-data">
<h2>Load Data<a class="headerlink" href="#load-data" title="Permalink to this heading">#</a></h2>
<p><img alt="LoadData.csv" src="_images/LoadDataCSV.png" /></p>
<p>LoadData.csv are CSVs that tell CellProfiler how the images should be parsed.
At a minimum, this CSV should contain PathName_{NameOfChannel} and FileName_{NameOfChannel} columns for each of your channels, as well as Metadata_{PieceOfMetadata} for each kind of metadata being used to group your image sets.
It can contain any other metadata you would like to track.
Some users have reported issues with using relative paths in the PathName columns; using absolute paths beginning with <code class="docutils literal notranslate"><span class="pre">/home/ubuntu/bucket/{relativepath}</span></code> may increase your odds of success.</p>
<section id="creating-loaddata-csv">
<h3>Creating LoadData.csv<a class="headerlink" href="#creating-loaddata-csv" title="Permalink to this heading">#</a></h3>
<p>You can create this CSV yourself via your favorite scripting language.
We maintain a script for creating LoadData.csv from Phenix metadata XML files called <a class="reference external" href="https://github.com/broadinstitute/pe2loaddata">pe2loaddata</a>.</p>
<p>You can also create the LoadData.csv in a local copy of CellProfiler using the standard input modules of Images, Metadata, NamesAndTypes and Groups.
More written and video information about using the input modules can be found <span class="xref myst">here</span>.
After loading in your images, use the <code class="docutils literal notranslate"><span class="pre">Export</span></code>-&gt;<code class="docutils literal notranslate"><span class="pre">Image</span> <span class="pre">Set</span> <span class="pre">Listing</span></code> command.
You will then need to replace the local paths with the paths where the files can be found in S3 which is hardcoded to <code class="docutils literal notranslate"><span class="pre">/home/ubuntu/bucket</span></code>.
If your files are nested in the same structure, this can be done with a simple find and replace in any text editing software.
(e.g. Find ‘/Users/eweisbar/Desktop’ and replace with ‘/home/ubuntu/bucket’)</p>
<p>More detail: The <a class="reference external" href="https://github.com/DistributedScience/Distributed-CellProfiler/blob/master/worker/Dockerfile">Dockerfile</a> is the first script to execute in the Docker.
It creates the <code class="docutils literal notranslate"><span class="pre">/home/ubuntu/</span></code> folder and then executes <a class="reference external" href="https://github.com/DistributedScience/Distributed-CellProfiler/blob/master/worker/run-worker.sh">run_worker.sh</a> from that point.
run_worker.sh makes <code class="docutils literal notranslate"><span class="pre">/home/ubuntu/bucket/</span></code> and uses S3FS to mount your S3 bucket at that location. (If you set <code class="docutils literal notranslate"><span class="pre">DOWNLOAD_FILES='True'</span></code> in your <a class="reference internal" href="step_1_configuration.html"><span class="doc std std-doc">config</span></a>, then the S3FS mount is bypassed but files are downloaded locally to the <code class="docutils literal notranslate"><span class="pre">/home/ubuntu/bucket</span></code> path so that the paths are the same as if it was S3FS mounted.)</p>
</section>
<section id="using-loaddata-csv">
<h3>Using LoadData.csv<a class="headerlink" href="#using-loaddata-csv" title="Permalink to this heading">#</a></h3>
<p>To use a LoadData.csv with submitJobs, put the path to the LoadData.csv in <strong>data_file:</strong>.</p>
<p>To use a LoadData.csv with run_batch_general.py, enter the name of the LoadData.csv under <strong>#project specific stuff</strong> in <code class="docutils literal notranslate"><span class="pre">{STEP}name</span></code>.
At the bottom of the file, make sure there are no arguments or <code class="docutils literal notranslate"><span class="pre">batch=False</span></code> in the command for the step you are running.
(e.g. <code class="docutils literal notranslate"><span class="pre">MakeAnalysisJobs()</span></code> or <code class="docutils literal notranslate"><span class="pre">MakeAnalysisJobs(batch=False)</span></code>)
Note that if you do not follow our standard file organization, under <strong>#not project specific, unless you deviate from the structure</strong> you will also need to edit <code class="docutils literal notranslate"><span class="pre">datafilepath</span></code>.</p>
</section>
</section>
<section id="batch-files">
<h2>Batch Files<a class="headerlink" href="#batch-files" title="Permalink to this heading">#</a></h2>
<p>Batch files are an easy way to transition from running locally to distributed.
A batch file is an <code class="docutils literal notranslate"><span class="pre">.h5</span></code> file created by CellProfiler which captures all the data needed to run your workflow - pipeline and file information are packaged together.
To use a batch file, your data needs to have the same structure in the cloud as on your local machine.</p>
<section id="creating-batch-files">
<h3>Creating batch files<a class="headerlink" href="#creating-batch-files" title="Permalink to this heading">#</a></h3>
<p>To create a batch file, load all your images into a local copy of CellProfiler using the standard input modules of Images, Metadata, NamesAndTypes and Groups.
More written and video information about using the input modules can be found <span class="xref myst">here</span>.
Put the <code class="docutils literal notranslate"><span class="pre">CreateBatchFiles</span></code> module at the end of your pipeline and ensure that it is selected.
Add a path mapping and edit the <code class="docutils literal notranslate"><span class="pre">Local</span> <span class="pre">root</span> <span class="pre">path</span></code> and <code class="docutils literal notranslate"><span class="pre">Cluster</span> <span class="pre">root</span> <span class="pre">path</span></code>.
Run the CellProfiler pipeline by pressing the <code class="docutils literal notranslate"><span class="pre">Analyze</span> <span class="pre">Images</span></code> button; note that it won’t actually run your pipeline but will instead create a batch file.
More information on the <code class="docutils literal notranslate"><span class="pre">CreateBatchFiles</span></code> module can be found <a class="reference external" href="https://cellprofiler-manual.s3.amazonaws.com/CellProfiler-4.2.4/modules/fileprocessing.html">here</a>.</p>
</section>
<section id="using-batch-files">
<h3>Using batch files<a class="headerlink" href="#using-batch-files" title="Permalink to this heading">#</a></h3>
<p>To use a batch file with submitJobs, put the path to the <code class="docutils literal notranslate"><span class="pre">.h5</span></code> file in <strong>data_file:</strong> and <strong>pipeline:</strong>.</p>
<p>To use a batch file with run_batch_general.py, enter the name of the batch file under <strong>#project specific stuff</strong> in <code class="docutils literal notranslate"><span class="pre">batchpipename{STEP}</span></code>.
At the bottom of the file, set <code class="docutils literal notranslate"><span class="pre">batch=True</span></code> in the command for the step you are running.
(e.g. <code class="docutils literal notranslate"><span class="pre">MakeAnalysisJobs(batch=True)</span></code>)
Note that if you do not follow our standard file organization, under <strong>#not project specific, unless you deviate from the structure</strong> you will also need to edit <code class="docutils literal notranslate"><span class="pre">batchpath</span></code>.</p>
</section>
</section>
<section id="file-lists">
<h2>File lists<a class="headerlink" href="#file-lists" title="Permalink to this heading">#</a></h2>
<p>You can also simply pass a list of absolute file paths (not relative paths) with one file per row in <code class="docutils literal notranslate"><span class="pre">.txt</span></code> format.
These must be the absolute paths that Distributed-CellProfiler will see, aka relative to the root of your bucket (which will be mounted as <code class="docutils literal notranslate"><span class="pre">/bucket</span></code>.</p>
<section id="creating-file-lists">
<h3>Creating File Lists<a class="headerlink" href="#creating-file-lists" title="Permalink to this heading">#</a></h3>
<p>Use any text editing software to create a <code class="docutils literal notranslate"><span class="pre">.txt</span></code> file where each line of the file is a path to a single image that you want to process.</p>
</section>
<section id="using-file-lists">
<h3>Using File Lists<a class="headerlink" href="#using-file-lists" title="Permalink to this heading">#</a></h3>
<p>To use a file list with submitJobs, put the path to the <code class="docutils literal notranslate"><span class="pre">.txt</span></code> file in <strong>data_file:</strong>.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="step_2_submit_jobs.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Step 2: Submit Jobs</p>
      </div>
    </a>
    <a class="right-next"
       href="step_3_start_cluster.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Step 3: Start Cluster</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metadata-use-in-dcp">Metadata use in DCP</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-data">Load Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-loaddata-csv">Creating LoadData.csv</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-loaddata-csv">Using LoadData.csv</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#batch-files">Batch Files</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-batch-files">Creating batch files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-batch-files">Using batch files</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-lists">File lists</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-file-lists">Creating File Lists</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-file-lists">Using File Lists</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Broad Institute
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>